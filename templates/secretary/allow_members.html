{% extends 'secretary/slayout.html' %}

{% block title %}rportal - Verification{% endblock %}

{% block content %}
<div class="container mt-5 pt-3">
  <div class="row row-cols-auto">
    <a class="col" href='javascript:self.history.back();'>
      <i class="bi bi-arrow-left" style="font-size: x-large;"></i>
    </a>
    <h2 class="col">New Request</h2>
  </div>
  <div class="container">
    <hr>
    {% if (account|length)==0 %}
    <div class="container">
      <p class="h3 m-5 text-muted text-center">no new request</p>
    </div>
    {% else %}
    <div class="row row-cols-1 row-cols-md-3 g-4">
      {% for data in account %}
      <div class="col">
        <div class="card ">
          <div class="card-body">
            <h5 class="card-title">
              <!-- <div class="row">
                <div class="col">
                  <i class="bi bi-person"></i> -->
              {{data['Mname']}}
              <!-- </div>
              </div> -->
            </h5>
            <div class="row">
              <div class="col">
                <i class="bi bi-building"></i>
                <span class="mx-1">
                  {{ data['Mwing'] }}, {{ data['Mflatno'] }}</span>
              </div>
            </div>
            <div class="row">
              <div class="col">
                <i class="bi bi-telephone"></i>
                <span class="mx-1 text-uppercase">
                  {{ data['Mmobile']}}
                </span>
              </div>
            </div>
            <div class="row">
              <div class="col">
                <i class="bi bi-toggle-on"></i>
                <span class="mx-1 text-uppercase" style="font-weight: 500;">
                  {{ data['member_status']}}
                </span>
              </div>
            </div>
          </div>
          <div class="card-footer d-flex flex-row-reverse">
            <form action="/rportal/a_members/{{data.Mid}}" method="post">
              <input type="hidden" name="Memail" value={{ data['Memail'] }}></input>
              <input type="hidden" name="Mname" value={{ data['Mname'] }}></input>
              <button class="btn btn-outline-secondary btn-sm mx-1" type="submit"><i class="bi bi-check2"></i></button>
            </form>
            <button type="button" class="btn btn-outline-secondary btn-sm mx-1" data-bs-toggle="modal"
              data-bs-target="#rejectModal">
              <i class="bi bi-x-lg"></i>
            </button>
            <!-- Modal -->
            <div class="modal fade" id="rejectModal" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1"
              aria-labelledby="rejectModalLabel" aria-hidden="true">
              <div class="modal-dialog">
                <div class="modal-content">
                  <form action="/rportal/r_members" method="post">
                    <div class="modal-header">
                      <h5 class="modal-title" id="rejectModalLabel">Reject Reason</h5>
                      <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="modal-body">
                      <input type="hidden" name="email" value="{{ data['Memail'] }}">
                      <input type="hidden" name="Mid" value="{{data['Mid']}}">
                      <input type="hidden" name="Sname" value="{{ data['Sname'] }}">
                      <input type="hidden" name="name" value="{{data['name']}}">
                      <textarea name="message" type="text" required class="form-control"
                        placeholder="Leave a comment here" id="rejectTextarea" style="height: 100px"></textarea>
                    </div>
                    <div class="modal-footer">
                      <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                      <button type="submit" value="submit" class="btn btn-primary">Submit</button>
                    </div>
                  </form>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      {% endfor %}
    </div>
    {% endif %}
  </div>
</div>
{% endblock %}